<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thông Tin Tài Khoản</title>
    <link rel="stylesheet" th:href="@{/css/info.css}">
    <link th:href="@{/css/main.css}" rel="stylesheet" />
    <link th:href="@{/css/thongbao.css}" rel="stylesheet" />
    <script th:src="@{/js/nav.js}"></script>
    <link rel="icon" th:href="@{/images/iconweb.png}" type="image/x-icon">

</head>
<body>
    <header th:replace="~{/fragments/top :: top}"></header>

    <div class="container-info">
        <nav class="sidebar">
            <div class="profile">
                <div class="profile-img">
                    <img src="/images/canhan.png">
                </div>
                <p th:text="'SDT: ' + ${nguoiDung.sdt}"></p>
            </div>
            <ul class="menu" style="align-items: start;">
                <li><a th:href="@{/info}">Thông tin tài khoản</a></li>
                <li><a th:href="@{/resetpw}">Quản lý mật khẩu</a></li>
                <li><a th:href="@{/lsdatban}">Lịch sử đơn Đặt chỗ</a></li>
            </ul>
            <a style="margin-left: 20px;" class="button" href="#" onclick="confirmLogout()">Đăng xuất</a>
        </nav>
        <div class="content">
            <h1>Thông Tin Tài Khoản</h1>
            <form th:action="@{/update-info}" method="post" th:object="${nguoiDung}">
                <div class="form-group">
                    <label for="hoten">Tên:</label>
                    <input type="text" id="hoten" name="hoten" th:value="${nguoiDung.hoten}" th:field="*{hoten}" required>
                </div>
                <div class="form-group">
                    <label for="sdt">Số điện thoại:</label>
                    <input type="text" id="sdt" name="sdt" th:value="${nguoiDung.sdt}" th:field="*{sdt}" required>
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" th:value="${nguoiDung.email}" th:field="*{email}" required>
                </div>
                <div class="update-diachi">
                    <div class="form-group">
                        <label for="sonha">Số nhà:</label>
                        <input type="text" id="sonha" name="sonha" th:value="${nguoiDung.sonha}" required>
                    </div>
                    <div class="form-group">
                        <label for="duong">Đường:</label>
                        <input type="text" id="duong" name="duong" th:value="${nguoiDung.duong}" required>
                    </div>
                    <div class="form-group">
                        <label for="quan">Quận:</label>
                        <input type="text" id="quan" name="quan" th:value="${nguoiDung.quan}" required>
                    </div>
                    <div class="form-group">
                        <label for="thanhpho">Thành Phố:</label>
                        <input type="text" id="thanhpho" name="thanhpho" th:value="${nguoiDung.thanhpho}" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="diachi">Địa chỉ:</label>
                    <input type="text" id="diachi" name="diachi" th:value="${nguoiDung.getFullAddress()}" readonly>
                </div>
                <div class="form-group">
                    <label for="solandatban">Số lần đặt bàn:</label>
                    <input type="text" id="solandatban" name="solandatban" th:value="${nguoiDung.solandatban}" th:field="*{solandatban}" readonly>
                </div>
                <button type="submit">Cập nhật</button>
            </form>
            <div class="fm-phanquyen" style="margin-top: 20px;">
                <div class="item-phanquyen" th:if="${nguoiDung.mapq == 1}">
                    <a target="_blank" th:href="@{/admin/tatcadoitac}" class="button">Quản lý Admin</a>
                </div>
                <div class="item-phanquyen" th:if="${nguoiDung.mapq == 3}">
                    <a target="_blank" th:href = "@{/doitac/{id} (id = ${nguoiDung.doiTac.madt})}" class="button">Quản lý Đối tác</a>
                </div>
            </div>
        </div>
    </div>
    <script>
        function confirmLogout() {
            if (confirm('Bạn có chắc chắn muốn đăng xuất không?')) {
                window.location.href = '/logout';
            }
        }
    </script>
</body>
</html>
